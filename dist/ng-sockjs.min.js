angular.module("ng.sockjs",[]).value("ngSockUrl","/").value("ngSockRetry",5e3).factory("socket",["$rootScope","ngSockUrl","ngSockRetry",function(n,o,e){var t,c=[],s=[],u=[],i=[],f=function(){t=new SockJS(o),t.onopen=function(){c=c.filter(function(n){return t.send(JSON.stringify(n)),!1}),s.forEach(function(o){o(t),n.$digest()})},t.onclose=function(){u.forEach(function(o){o(),n.$digest()}),setTimeout(f,e)},t.onmessage=function(o){"message"==o.type&&i.forEach(function(e){e.call(window,JSON.parse(o.data)),n.$digest()})}};return f(),{onOpen:function(n){s.push(n)},onClose:function(n){u.push(n)},onMessage:function(n){i.push(n)},send:function(n){1!==t.readyState?c.push(n):t.send(JSON.stringify(n))}}}]);